# ubuntu-lxde
В сети уже тонна виртуальных рабочих столов в докер-контейнерах, но все они кривые и старые. Поэтому вот мой - всё равно кривой, зато не старый
![Рабочий стол](https://i.imgur.com/QiwExkn.png)

## Что это?
Это набор для запуска виртуального рабочего стола(этакая виртуальная машина, но использующая ядро системы). Тут все файлы для сборки и конфиги, чтобы собрать это на коленке в любом месте, где запускается докер.  
Содержимое: Ubuntu 24.04, LXDE + XVFB + X11VNC + NoVNC, Firefox.

## Зачем это сделано?
1. Утереть нос dorowu с его образом dorowu/ubuntu-desktop-lxde-vnc, потому-что мой образ на 200 мб легче.
2. Добавить в портфолио нестандартный образ
3. Потому-что могу

## Как запустить?

Собрать образ:
```bash
git clone https://github.com/TamerLAN42/ubuntu-lxde.git
cd ubuntu-lxde
docker-compose up -d
```

Использовать уже собранный с dockerhub
```bash
docker run -d -p 6080:6080 -p 5900:5900 -e VNC_PASSWORD="YourSuperDuperSecretPassword" --name ubuntu-lxde --shm-size=6gb tamerlan42/ubuntu-lxde
```

После этого можно подключиться к рабочему столу через VNC-клиент по порту 5900, либо через NoVNC в браузере <IP-сервера>:6080

Пароль для доступа к VNC указывается через переменную окружения `VNC_PASSWORD`

## Кто управляет демонами?
Это supervisord. Все сервисы:
- XVFB - виртуальный дисплей
- LXDE - графическая среда рабочего стола
- X11VNC - VNC-сервер для удаленного доступа
- NoVNC - Веб-прокси для доступа к VNC через браузер  
Все логи пишутся в /var/log

## А где что хранится?
По умолчанию монтируется домашняя директория /root, это именной volume, найти точку залегания можно через `docker volume list` + `docker volume inspect <name>`  
В /root хранится большинство конфигов, рабочий стол, скачанные файлы, но всё за пределами домашней директории будет удаляться вместе с удалением контейнера  
**Не монтируйте volume к директориям на хосте**, это перезапишет все конфиги и заставит меня, который всё это настраивал, грустить

## Безопасность
1. Контейнер запускается от root, DevSecOps мне не стать. 
2. VNC защищен паролем, изменять через переменную окружения `VNC_PASSWORD`.
3. Рекомендуется запускать **только** в изолированной сети, но кто-ж меня будет слушать.

## Если что-то сломалось
```bash
# Смотрим логи, гуглим ошибки
docker logs ubuntu-lxde

# Пересобираем образ
docker-compose build --no-cache

# Запускаем заново
docker-compose up -d

# Если ничего не помогло - значит день такой
```  
## Для чего это можно использовать?
Это изолированное окружение с целым Линуксом в нём. Для чего угодно - 
- Тестирование в изолированном окружении
- Демонстрация приложений
- ~~Для ломания системы студентами~~ *Образовательные цели по информационной безопасности*
- ~~Создание ботоферм~~ *Исследование масштабируемости приложений*
- Просто запустить, показать знакомым, и они такие "Вау, круто!"

*Осуждаю и не одобряю нецелевое использование, если что*

Дальше всё зависит от вашей фантазии

---
Собрано с ❤️ и кофеином, специально для портфолио.  
[![Docker Hub](https://img.shields.io/docker/pulls/tamerlan42/ubuntu-lxde.svg)](https://hub.docker.com/r/tamerlan42/ubuntu-lxde)